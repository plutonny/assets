"use strict";var mainBuild=75;BETA&&(document.getElementById("csc11-title-of-page").innerHTML="Beta version",console.log(`\n    Перед выходом в релиз:\n        • Все файлы .html: поменять директории файлов на релиз\n        • preload.js: переменная BETA\n        \n    Чтобы получить модальное окно дебага, введите команду: frames.debugModal() или перейдите по ссылке: ${"/"==window.location.href.charAt(window.location.href.length-1)?`${window.location.href}?debug=true`:`${window.location.href}&debug=true`}\n    `)),console.log(`Current builds (version ${siteVersion}):\n    Preload JS:  build ${deviceStorage.get("preloadJSBuild")}\n    Frames JS:   build ${deviceStorage.get("framesJSBuild")}\n    Main JS:     build ${deviceStorage.get("mainJSBuild")}\n    Timeable JS: build ${deviceStorage.get("timetableJSBuild")}\n    Home:        build ${deviceStorage.get("homeBuildPage")}\n    Other:       build ${deviceStorage.get("otherBuildPage")}\n    Gtable:      build ${deviceStorage.get("gtableBuildPage")}\n    Simple:      build ${deviceStorage.get("simpleBuildPage")}\n    Settings:    build ${deviceStorage.get("settingsBuildPage")}\n    Support:     build ${deviceStorage.get("supportBuildPage")}\n`);var theme={prepare:function(){deviceStorage.check("themeType3Time")&&3==deviceStorage.get("themeType")&&(console.warn("Warning: script found inconsistency in localStorage and fixes it"),deviceStorage.write("themeType",1)),deviceStorage.check("themeType")&&(console.warn("Warning: theme type is undefined, set to default"),deviceStorage.write("themeType",1)),deviceStorage.check("theme")&&(console.warn("Warning: theme is undefined, set theme to light"),deviceStorage.write("theme","light")),"light"!=deviceStorage.get("theme")&&"dark"!=deviceStorage.get("theme")&&(console.warn("Warning: theme is incorrect, set theme to light"),deviceStorage.write("theme","light")),deviceStorage.check("themeEnableThemeButton")&&(console.warn("Warning: theme button is undefined, turned it on"),deviceStorage.write("themeEnableThemeButton",!0)),2!=deviceStorage.get("themeType")&&3!=deviceStorage.get("themeType")||deviceStorage.write("themeEnableThemeButton",!1);try{var e=SunCalc.getTimes(CURRDATE,64.4,40.4);2==deviceStorage.get("themeType")&&(e.sunrise<CURRDATE&&CURRDATE<e.sunset?deviceStorage.write("theme","light"):deviceStorage.write("theme","dark"))}catch(e){page.critical(`Error: theme function prepare (${e})`)}return"light"!=deviceStorage.get("theme")&&("dark"==deviceStorage.get("theme")||void 0)},change:async function(){theme.prepare()?(deviceStorage.write("theme","light"),theme.load()):(deviceStorage.write("theme","dark"),theme.load())},load:async function(){theme.prepare()?(page.output("root-colors-theme",`${THEME.dark} #thMoon { display: none; }`),await page.sleep(65),document.getElementById("theme-color").content="#181818"):(page.output("root-colors-theme",`${THEME.light} #thSun { display: none; }`),await page.sleep(65),document.getElementById("theme-color").content="#e9e9e9")},gtable:async function(){page.output("root-colors-theme",`${THEME.light} #thSun { display: none; }`),await page.sleep(70),document.getElementById("theme-color").content="#ffffff",await page.sleep(5e3),page.output("loadText","")}};function enableLogger(){"serviceWorker"in navigator?window.addEventListener("load",function(){navigator.serviceWorker.register(`/college${betaRepos}/service-worker.js`).then(function(e){BETA&&console.log(`ServiceWorker: registration with scope ${e.scope}`)},function(e){page.error(`Error: ServiceWorker registration failed: ${e}`)}).catch(function(e){page.error(`Error: ServiceWorker function (${e})`)})}):console.warn("Warning: Service worker is not supported")}function autoReturnToPCVersionF(){deviceStorage.write("autoReturnToPCVersion","true"!=deviceStorage.get("autoReturnToPCVersion"))}REQUEST.debug&&frames.debugModal(),"true"==deviceStorage.get("autoReturnToPCVersion")&&window.location.assign(`/college${betaRepos}/PC/`),window.onload=function(){window.innerWidth>=540&&"true"!=deviceStorage.get("ignorePCDisable")&&(document.body.innerHTML=`\n        <div style="background-color: var(--secondary-bg-color); width: calc(100vw - 48px); height: calc(100vh - 48px); padding: 24px; display: flex; flex-direction: column; flex-wrap: nowrap; align-items: center; justify-content: center;">\n            <h1 style="text-align: center;">Привет${deviceStorage.check("username")?"":`, ${deviceStorage.get("username")}`}!</h1>\n            <p style="text-align: center;">Понимаю, неожиданно, что вместо сайта на ПК Вы видите это окно. К сожалению, разработчик не успел сделать ПК версию в обновлении, но торопился выложить актуальную версию, которая намного лучше предыдущей.</p>\n            <p style="text-align: center;">Но разработчик предусмотрел для пользователей ПК запасной вариант: пользоваться прошлой версией, у которой все еще актуальная ПК версия.</p>\n            <div style="display: flex; align-items: center; justify-content: center; flex-wrap: wrap;">\n                <button style="height: 48px; width: 256px; margin: 8px; border: none; border-radius: 100px; cursor: pointer;" onclick="window.location.assign('/college${betaRepos}/PC/')">Перейти на старую версию</button>\n            </div>\n            <div style="margin: 0; display: flex; align-items: center;">\n                <input type="checkbox" id="arpcv" name="arpcv" onchange="autoReturnToPCVersionF()" style="margin: 0px 12px 0px 6px;" value="arpcv">\n                <label for="arpcv">автоматически переходить на старую версию</label>\n            </div>\n            <p style="text-align: center;">Есть еще вариант: на Ваш страх и риск использовать мобильную версию на ПК. Это приведет к кривому и неюзабельному интерфейсу.</p>\n            <div style="display: flex; align-items: center; justify-content: center; flex-wrap: wrap;">\n                <button style="height: 48px; width: 256px; margin: 8px; border: none; border-radius: 100px; cursor: pointer;" onclick="deviceStorage.write('ignorePCDisable', true); location.reload()">Использовать новую версию</button>\n            </div>\n        </div>\n        `)},deviceStorage.write("mainJSBuild",mainBuild),theme.load(),enableLogger();